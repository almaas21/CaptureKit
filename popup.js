import{d as H,r as v,w as $,c as B,a as y,b as d,o as c,n as I,e as t,f as h,g as x,u as m,F as j,h as G,t as Q,i as C,j as b,v as M,k as V,l as W,m as F,p as K,q as Y}from"./chunks/main-Bu1yZWFu.js";import{_ as J}from"./chunks/webchatagent-D4SWolo5.js";const X="/icons/icon48.png",_="recording-settings",R=H("recording",()=>{const u=v(!1),s=v(!1),n=v(0),a=v(!1),e=v({captureMode:"tab",systemAudio:!0,microphone:!1,camera:!1,quality:"1080p",elementBounds:null,backgroundMode:"none",backgroundColor:"#00ff00",backgroundImage:void 0});async function g(){try{const r=await chrome.storage.local.get(_);if(r[_]){const p=r[_];e.value.captureMode=p.captureMode??"tab",e.value.systemAudio=p.systemAudio??!0,e.value.microphone=p.microphone??!1,e.value.camera=p.camera??!1,e.value.quality=p.quality??"1080p",e.value.backgroundMode=p.backgroundMode??"none",e.value.backgroundColor=p.backgroundColor??"#00ff00",e.value.backgroundImage=p.backgroundImage}}catch{}a.value=!0}async function f(){if(a.value)try{const r={captureMode:e.value.captureMode,systemAudio:e.value.systemAudio,microphone:e.value.microphone,camera:e.value.camera,quality:e.value.quality,backgroundMode:e.value.backgroundMode,backgroundColor:e.value.backgroundColor,backgroundImage:e.value.backgroundImage};await chrome.storage.local.set({[_]:r})}catch{}}$(()=>({captureMode:e.value.captureMode,systemAudio:e.value.systemAudio,microphone:e.value.microphone,camera:e.value.camera,quality:e.value.quality,backgroundMode:e.value.backgroundMode,backgroundColor:e.value.backgroundColor,backgroundImage:e.value.backgroundImage}),()=>{f()},{deep:!0}),g();const l=B(()=>({isRecording:u.value,isPaused:s.value,duration:n.value,config:e.value})),o=B(()=>({"720p":{width:1280,height:720,bitrate:4e6},"1080p":{width:1920,height:1080,bitrate:8e6},"4k":{width:3840,height:2160,bitrate:15e6}})[e.value.quality]);function i(r){e.value.captureMode=r}function k(r){e.value.quality=r}function A(){e.value.systemAudio=!e.value.systemAudio}function w(){e.value.microphone=!e.value.microphone}function L(){e.value.camera=!e.value.camera}function q(r){e.value.backgroundMode=r}function E(r){e.value.backgroundColor=r}function P(r){e.value.backgroundImage=r}function T(r){e.value.elementBounds=r}function N(){u.value=!0,s.value=!1,n.value=0}function D(){u.value=!1,s.value=!1}function O(r){n.value=r}function z(){u.value=!1,s.value=!1,n.value=0,e.value.elementBounds=null}return{isRecording:u,isPaused:s,duration:n,config:e,isLoaded:a,state:l,qualitySettings:o,setCaptureMode:i,setQuality:k,toggleSystemAudio:A,toggleMicrophone:w,toggleCamera:L,setBackgroundMode:q,setBackgroundColor:E,setBackgroundImage:P,setElementBounds:T,startRecording:N,stopRecording:D,updateDuration:O,reset:z,loadSettings:g}}),S=y({__name:"ToggleSwitch",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(u){return(s,n)=>(c(),d("button",{onClick:n[0]||(n[0]=a=>s.$emit("update:modelValue",!u.modelValue)),class:I(["relative w-11 h-6 rounded-full transition-colors duration-200",u.modelValue?"bg-accent":"bg-surface-lighter"])},[t("span",{class:I(["absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform duration-200",u.modelValue?"translate-x-5":"translate-x-0"])},null,2)],2))}}),Z={class:"space-y-3"},ee={class:"space-y-2"},te={class:"flex items-center justify-between p-3 bg-surface-light rounded-xl"},oe={class:"flex items-center justify-between p-3 bg-surface-light rounded-xl"},ae={class:"flex items-center justify-between p-3 bg-surface-light rounded-xl"},se=y({__name:"AudioSettings",setup(u){const s=R();return(n,a)=>(c(),d("div",Z,[a[6]||(a[6]=t("label",{class:"text-sm font-medium text-gray-300"},"Audio & Camera",-1)),t("div",ee,[t("div",te,[a[3]||(a[3]=h('<div class="flex items-center gap-3"><div class="w-8 h-8 rounded-lg bg-surface flex items-center justify-center"><svg class="w-4 h-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"></path></svg></div><span class="text-sm text-white">System Audio</span></div>',1)),x(S,{"model-value":m(s).config.systemAudio,"onUpdate:modelValue":a[0]||(a[0]=e=>m(s).toggleSystemAudio())},null,8,["model-value"])]),t("div",oe,[a[4]||(a[4]=h('<div class="flex items-center gap-3"><div class="w-8 h-8 rounded-lg bg-surface flex items-center justify-center"><svg class="w-4 h-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"></path></svg></div><span class="text-sm text-white">Microphone</span></div>',1)),x(S,{"model-value":m(s).config.microphone,"onUpdate:modelValue":a[1]||(a[1]=e=>m(s).toggleMicrophone())},null,8,["model-value"])]),t("div",ae,[a[5]||(a[5]=h('<div class="flex items-center gap-3"><div class="w-8 h-8 rounded-lg bg-surface flex items-center justify-center"><svg class="w-4 h-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path></svg></div><span class="text-sm text-white">Camera PiP</span></div>',1)),x(S,{"model-value":m(s).config.camera,"onUpdate:modelValue":a[2]||(a[2]=e=>m(s).toggleCamera())},null,8,["model-value"])])])]))}}),ne={class:"space-y-2"},re={class:"grid grid-cols-3 gap-2"},le=["onClick"],ie=y({__name:"QualitySettings",setup(u){const s=R(),n=[{id:"720p",label:"720p"},{id:"1080p",label:"1080p"},{id:"4k",label:"4K"}];return(a,e)=>(c(),d("div",ne,[e[0]||(e[0]=t("label",{class:"text-sm font-medium text-gray-300"},"Video Quality",-1)),t("div",re,[(c(),d(j,null,G(n,g=>t("button",{key:g.id,onClick:f=>m(s).setQuality(g.id),class:I(["py-2 px-3 rounded-xl text-sm font-medium transition-all duration-200",m(s).config.quality===g.id?"bg-accent text-white":"bg-surface-light text-gray-400 hover:text-white hover:bg-surface-lighter"])},Q(g.label),11,le)),64))])]))}}),ue={class:"space-y-3"},de={class:"space-y-2"},ce={class:"p-3 bg-surface-light rounded-xl space-y-2"},ge={class:"space-y-1.5"},pe={class:"flex items-center gap-2 cursor-pointer"},me={class:"flex items-center gap-2 cursor-pointer"},ve={class:"flex items-center gap-2 cursor-pointer"},fe={class:"flex items-center gap-2 cursor-pointer"},be={key:0,class:"p-3 bg-surface-light rounded-xl"},xe={class:"flex items-center gap-3"},he={key:1,class:"p-3 bg-surface-light rounded-xl space-y-2"},ye={class:"space-y-2"},ke={class:"block"},we={key:0,class:"relative"},Ce=["src"],Me={key:2,class:"text-xs text-gray-500 px-1"},_e=y({__name:"BackgroundSettings",setup(u){const s=R(),n=v(null),a=B({get:()=>s.config.backgroundMode||"none",set:l=>s.setBackgroundMode(l)}),e=B({get:()=>s.config.backgroundColor||"#00ff00",set:l=>s.setBackgroundColor(l)});function g(l){const i=l.target.files?.[0];if(!i)return;if(!i.type.startsWith("image/")){alert("Please select an image file");return}const k=new FileReader;k.onload=A=>{const w=A.target?.result;s.setBackgroundImage(w),n.value=w},k.readAsDataURL(i)}function f(){s.setBackgroundImage(void 0),n.value=null;const l=document.getElementById("background-image-input");l&&(l.value="")}return $(()=>s.config.backgroundImage,l=>{n.value=l||null},{immediate:!0}),(l,o)=>(c(),d("div",ue,[o[14]||(o[14]=t("label",{class:"text-sm font-medium text-gray-300"},"Background Replacement",-1)),t("div",de,[t("div",ce,[o[10]||(o[10]=t("label",{class:"text-xs text-gray-400 mb-2 block"},"Mode",-1)),t("div",ge,[t("label",pe,[b(t("input",{type:"radio",value:"none","onUpdate:modelValue":o[0]||(o[0]=i=>a.value=i),class:"w-4 h-4 text-accent focus:ring-accent focus:ring-2"},null,512),[[M,a.value]]),o[6]||(o[6]=t("span",{class:"text-sm text-white"},"No Effect",-1))]),t("label",me,[b(t("input",{type:"radio",value:"remove","onUpdate:modelValue":o[1]||(o[1]=i=>a.value=i),class:"w-4 h-4 text-accent focus:ring-accent focus:ring-2"},null,512),[[M,a.value]]),o[7]||(o[7]=t("span",{class:"text-sm text-white"},"Remove (Transparent)",-1))]),t("label",ve,[b(t("input",{type:"radio",value:"color","onUpdate:modelValue":o[2]||(o[2]=i=>a.value=i),class:"w-4 h-4 text-accent focus:ring-accent focus:ring-2"},null,512),[[M,a.value]]),o[8]||(o[8]=t("span",{class:"text-sm text-white"},"Color",-1))]),t("label",fe,[b(t("input",{type:"radio",value:"image","onUpdate:modelValue":o[3]||(o[3]=i=>a.value=i),class:"w-4 h-4 text-accent focus:ring-accent focus:ring-2"},null,512),[[M,a.value]]),o[9]||(o[9]=t("span",{class:"text-sm text-white"},"Background Image",-1))])])]),a.value==="color"?(c(),d("div",be,[o[11]||(o[11]=t("label",{class:"text-xs text-gray-400 mb-2 block"},"Background Color",-1)),t("div",xe,[b(t("input",{type:"color","onUpdate:modelValue":o[4]||(o[4]=i=>e.value=i),class:"w-12 h-12 rounded-lg cursor-pointer border-2 border-surface"},null,512),[[V,e.value]]),b(t("input",{type:"text","onUpdate:modelValue":o[5]||(o[5]=i=>e.value=i),class:"flex-1 px-3 py-2 bg-surface rounded-lg text-white text-sm border border-surface-light focus:outline-none focus:border-accent",placeholder:"#00ff00"},null,512),[[V,e.value]])])])):C("",!0),a.value==="image"?(c(),d("div",he,[o[13]||(o[13]=t("label",{class:"text-xs text-gray-400 block"},"Background Image",-1)),t("div",ye,[t("label",ke,[t("input",{id:"background-image-input",type:"file",accept:"image/*",onChange:g,class:"hidden"},null,32),o[12]||(o[12]=t("div",{class:"px-3 py-2 bg-surface rounded-lg text-white text-sm text-center cursor-pointer hover:bg-surface/80 transition-colors border border-surface-light"}," Choose Image ",-1))]),n.value?(c(),d("div",we,[t("img",{src:n.value,alt:"Background preview",class:"w-full h-32 object-cover rounded-lg border border-surface-light"},null,8,Ce),t("button",{onClick:f,class:"absolute top-2 right-2 w-6 h-6 bg-red-500 hover:bg-red-600 rounded-full flex items-center justify-center text-white text-xs transition-colors"}," Ã— ")])):C("",!0)])])):C("",!0),a.value!=="none"?(c(),d("p",Me," Only works when Camera PiP is enabled ")):C("",!0)])]))}}),Be={class:"w-80 bg-surface p-5 space-y-5"},Re={key:0,class:"text-center space-y-4"},Ae=["disabled"],Se=y({__name:"App",setup(u){const s=R(),n=v(!1),a=v(!1);W(async()=>{try{const l=await chrome.runtime.sendMessage({type:"GET_RECORDING_STATUS"});a.value=l?.isRecording||!1}catch{a.value=!1}});async function e(){if(!n.value){n.value=!0;try{const l=new URLSearchParams({audio:s.config.systemAudio.toString(),mic:s.config.microphone.toString(),camera:s.config.camera.toString(),quality:s.config.quality,backgroundMode:s.config.backgroundMode||"none",backgroundColor:s.config.backgroundColor||"#00ff00"});s.config.backgroundImage&&l.set("backgroundImage",s.config.backgroundImage),await chrome.windows.create({url:chrome.runtime.getURL(`recorder.html?${l.toString()}`),type:"popup",width:800,height:780,top:50,left:50,focused:!0}),window.close()}catch{n.value=!1}}}async function g(){await chrome.runtime.sendMessage({type:"STOP_RECORDING"}),a.value=!1}function f(){chrome.tabs.create({url:chrome.runtime.getURL("editor.html")}),window.close()}return(l,o)=>(c(),d("div",Be,[a.value?(c(),d("div",Re,[o[0]||(o[0]=t("div",{class:"flex items-center justify-center gap-3"},[t("div",{class:"w-4 h-4 rounded-full bg-red-500 animate-pulse"}),t("span",{class:"text-xl font-bold text-white"},"Recording...")],-1)),o[1]||(o[1]=t("p",{class:"text-sm text-gray-400"}," Recording is in progress in another window ",-1)),t("button",{onClick:g,class:"w-full py-3 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-xl transition-colors"}," Stop Recording ")])):(c(),d(j,{key:1},[o[4]||(o[4]=h('<div class="flex items-center gap-3"><img src="'+X+'" alt="Logo" class="w-10 h-10"><div class="flex-1"><h1 class="text-lg font-bold text-white">CaptureKit</h1><p class="text-xs text-gray-400">Record your screen with ease</p></div></div>',1)),t("button",{onClick:f,class:"w-full py-2.5 bg-cyan-600 hover:bg-cyan-500 rounded-xl text-sm font-bold text-white transition-all flex items-center justify-center gap-2",title:"Open Video Editor"},[...o[2]||(o[2]=[t("svg",{class:"w-4.5 h-4.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),F(" Video Editor ",-1)])]),t("button",{onClick:e,disabled:n.value,class:"w-full py-3.5 bg-accent hover:bg-accent/90 disabled:opacity-50 rounded-xl font-semibold text-white transition-all flex items-center justify-center gap-2"},[...o[3]||(o[3]=[t("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},[t("circle",{cx:"12",cy:"12",r:"8"})],-1),t("span",null,"Start Recording",-1)])],8,Ae),o[5]||(o[5]=t("p",{class:"text-center text-xs text-gray-500"}," Choose what to share in the next dialog ",-1)),o[6]||(o[6]=t("div",{class:"h-px bg-surface-light"},null,-1)),x(se),x(ie),x(_e),o[7]||(o[7]=h('<a href="https://webchatagent.com/?ref=screenrecorder" target="_blank" class="flex items-center gap-2 p-2.5 bg-gradient-to-r from-indigo-500/10 to-purple-500/10 border border-indigo-500/20 rounded-xl hover:border-indigo-500/40 transition-all group"><img src="'+J+'" alt="WebChatAgent" class="w-8 h-8 rounded-lg"><div class="flex-1 min-w-0"><p class="text-xs font-medium text-white group-hover:text-indigo-300 transition-colors"> WebChatAgent </p><p class="text-[10px] text-gray-400 truncate"> AI Chatbot &amp; Live Chat for your Website </p></div><svg class="w-4 h-4 text-gray-500 group-hover:text-indigo-400 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg></a>',1))],64))]))}}),Ie=K(),U=Y(Se);U.use(Ie);U.mount("#app");
